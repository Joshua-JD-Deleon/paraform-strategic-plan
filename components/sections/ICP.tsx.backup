"use client";

import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { motion } from "framer-motion";
import { useState } from "react";
import {
  Heart,
  TrendingUp,
  Sprout,
  Building2,
  Code,
  Scale,
  DollarSign,
  CheckCircle2,
  Target,
  Bell,
  Users,
  Briefcase,
  Network,
  Zap,
  TrendingUp as PipelineIcon,
  Clock,
  CheckCircle,
  Layers,
  BarChart,
  UserPlus,
  ChevronDown,
  ChevronUp
} from "lucide-react";

const icpData = [
  {
    title: "Multi-Stakeholder Orchestration & Value Engineering",
    sections: [
      {
        label: "ECONOMIC BUYER ENGAGEMENT",
        icon: Briefcase,
        summary: "Build executive relationships through quantified business cases and board-ready value narratives",
        bullets: [
          "Co-develop ROI models and cost-benefit analyses with CFO, CRO, COO personas",
          "Validate value hypotheses early through structured discovery",
          "Deliver board-ready business cases that secure budget and accelerate timelines"
        ]
      },
      {
        label: "MULTI-THREADING ACROSS BUYING COMMITTEES",
        icon: Network,
        summary: "Map and influence 3-12 stakeholder committees to build consensus and compress cycles",
        bullets: [
          "Navigate executive sponsors, technical evaluators, end users, procurement, legal, security",
          "Build consensus through stakeholder-specific value narratives",
          "Orchestrate champion networks that de-risk deals and maintain momentum"
        ]
      },
      {
        label: "CHALLENGER METHODOLOGY EXECUTION",
        icon: Zap,
        summary: "Lead with insights that reframe thinking and position as strategic advisor vs. vendor",
        bullets: [
          "Teach for differentiation with provocative business insights",
          "Tailor messaging to each stakeholder's priorities and concerns",
          "Take control through constructive tension and status quo challenges"
        ]
      },
    ],
  },
  {
    title: "Sales Process Execution & Pipeline Excellence",
    sections: [
      {
        label: "SYSTEMATIC PIPELINE GENERATION",
        icon: PipelineIcon,
        summary: "Execute scalable outbound motions maintaining 4-4.5x pipeline coverage",
        bullets: [
          "Combine signal-based triggers, persona-led messaging, multi-channel sequencing",
          "Weekly pipeline reviews and analytical forecasting for predictable attainment",
          "Disciplined deal inspection cadence eliminates low-probability opportunities"
        ]
      },
      {
        label: "COMPLEX CYCLE NAVIGATION",
        icon: Clock,
        summary: "Orchestrate 3-12 month sales cycles through structured milestones and mutual action plans",
        bullets: [
          "Structured milestones: executive alignment → technical validation → POC → procurement",
          "Deploy mutual action plans to manage buying committee consensus",
          "Leverage executive sponsors to maintain momentum through complexity"
        ]
      },
      {
        label: "PROOF-OF-CONCEPT TO PRODUCTION CONVERSION",
        icon: CheckCircle,
        summary: "Design pilots with clear success criteria driving 80%+ POC-to-production conversion",
        bullets: [
          "Build expansion paths into pilot scoping from day one",
          "Structured business reviews with value realization tracking",
          "Position pilots as strategic beachheads for account growth"
        ]
      },
    ],
  },
  {
    title: "Strategic ICP Development & Signal-Based Prospecting",
    sections: [
      {
        label: "MEDDICC QUALIFICATION FRAMEWORK",
        icon: Target,
        summary: "Deploy MEDDICC rigor from first touch to drive 4.5x pipeline coverage",
        bullets: [
          "Validate Metrics, Economic Buyer access, Decision Criteria, Process, Pain, Champion",
          "Systematic qualification eliminates low-probability deals early",
          "Align decision criteria to your differentiation throughout buying cycle"
        ]
      },
      {
        label: "TRIGGER-BASED ACCOUNT ACTIVATION",
        icon: Bell,
        summary: "Monitor high-intent signals and execute precision outreach within organizational urgency windows",
        bullets: [
          "C-suite appointments, funding, M&A, regulatory deadlines, product launches, digital transformation",
          "Capitalize on organizational urgency and budget availability",
          "Precision outreach within signal timeframes for maximum impact"
        ]
      },
      {
        label: "IDEAL CUSTOMER PROFILE SEGMENTATION",
        icon: Users,
        summary: "Target mid-market to enterprise accounts with $50K-$1M+ deal potential and expansion opportunity",
        bullets: [
          "Active technology initiatives with 2-7 stakeholder cross-functional buying",
          "Strategic budget allocation and operational complexity requiring scale",
          "Prioritize executive accessibility and clear business impact metrics"
        ]
      },
    ],
  },
  {
    title: "Strategic Account Growth & Trusted Advisor Leadership",
    sections: [
      {
        label: "LAND-AND-EXPAND EXECUTION",
        icon: Layers,
        summary: "Deploy strategic account planning to grow initial deployments into organization-wide partnerships",
        bullets: [
          "Identify whitespace across departments, business units, use cases",
          "Execute expansion playbooks with consultative selling and executive sponsorship",
          "Value demonstration at each phase builds momentum for next expansion"
        ]
      },
      {
        label: "VALUE REALIZATION & BUSINESS REVIEWS",
        icon: BarChart,
        summary: "Conduct executive business reviews showcasing ROI 90+ days before renewal",
        bullets: [
          "Document realized ROI, operational improvements, strategic impact metrics",
          "Build renewal momentum through success documentation and expansion planning",
          "Position renewals as strategic reinvestment vs. transactional events"
        ]
      },
      {
        label: "CROSS-FUNCTIONAL PARTNERSHIP LEADERSHIP",
        icon: UserPlus,
        summary: "Orchestrate cross-functional teams to deliver unified customer experience and drive GTM strategy",
        bullets: [
          "Align Sales, Product, Customer Success, Engineering, Marketing on account strategy",
          "Enable partner channels and mentor junior sellers on methodology",
          "Shape GTM strategy through frontline insights and best practice documentation"
        ]
      },
    ],
  },
];

// Key metrics
const keyMetrics = [
  { label: "Total Closed Revenue", value: "$7.5M+", icon: DollarSign },
  { label: "Industries Served", value: "15+", icon: Building2 },
  { label: "Strategic Enterprise Logos", value: "F500 & High-Growth", icon: CheckCircle2 },
  { label: "Pipeline Coverage", value: "4.5:1", icon: TrendingUp }
];

// Industry verticals (condensed - no stories)
const industries = [
  { name: "CPG & Food", icon: Building2, deal: "$1.1M" },
  { name: "Healthcare & Life Sciences", icon: Heart, deal: "$900K" },
  { name: "AgTech & Manufacturing", icon: Sprout, deal: "$600K" },
  { name: "Financial Services", icon: TrendingUp, deal: "$480K" },
  { name: "Enterprise Technology", icon: Code, deal: "$400K" },
  { name: "Retail & Foodservice", icon: Building2, deal: "$220K" },
  { name: "Legal Services", icon: Scale, deal: "$180K" },
  { name: "Nonprofit", icon: Heart, deal: "Multi-deal" }
];

// Product categories (condensed)
const productCategories = [
  { category: "Technology Solutions", solutions: ["Market intelligence", "ML infrastructure", "Predictive analytics", "Consumer insights", "Research platforms"] },
  { category: "Data Engineering & Science", solutions: ["Data visualization", "Data engineering", "Data science", "Data privacy", "Analytics modernization"] },
  { category: "Security & Compliance", solutions: ["Threat detection", "SOC 2/FedRAMP", "Network security", "Compliance tools"] },
  { category: "GTM & Revenue Intelligence", solutions: ["Market research", "Competitive intel", "Account intelligence", "Sales enablement"] }
];

export function ICP() {
  // Initialize all sections as expanded by default
  const [expandedSections, setExpandedSections] = useState<{[key: string]: boolean}>(() => {
    const initial: {[key: string]: boolean} = {};
    icpData.forEach((card, cardIndex) => {
      card.sections.forEach((_, sectionIndex) => {
        initial[`${cardIndex}-${sectionIndex}`] = true;
      });
    });
    return initial;
  });

  const toggleSection = (cardIndex: number, sectionIndex: number) => {
    const key = `${cardIndex}-${sectionIndex}`;
    setExpandedSections(prev => ({
      ...prev,
      [key]: !prev[key]
    }));
  };

  return (
    <section className="py-6 md:py-10 bg-gray-50">
      <div className="container mx-auto px-4 md:px-6 lg:px-8">
        <div className="mx-auto max-w-[1600px]">
          {/* Section Header */}
          <div className="text-center mb-4 md:mb-6">
            <div className="inline-flex items-center gap-2 rounded-full bg-amber-100 px-4 py-1.5 text-sm font-medium text-amber-700 mb-4">
              <span className="relative flex h-2 w-2">
                <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-amber-500 opacity-75"></span>
                <span className="relative inline-flex rounded-full h-2 w-2 bg-amber-500"></span>
              </span>
              Target Strategy
            </div>
            <h2 className="text-3xl font-bold text-stone-900 md:text-4xl lg:text-5xl mb-2">
              Sales Methodology & Execution Framework
            </h2>
            <p className="text-base md:text-lg text-stone-600 max-w-3xl mx-auto mb-3">
              I approach enterprise sales like engineering complex systems: start with solid architecture (MEDDICC qualification),
              build multi-threaded relationships across buying committees, and execute with disciplined process management.
            </p>
            <p className="text-sm text-stone-500 max-w-3xl mx-auto">
              These frameworks aren't theoretical—they're battle-tested approaches refined across 6 years selling AI/ML infrastructure,
              data analytics, and cybersecurity to F500 enterprises.
            </p>
          </div>

          {/* ICP Methodology Cards */}
          <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12">
            {icpData.map((card, cardIndex) => (
              <motion.div
                key={card.title}
                initial={{ opacity: 0, y: 20 }}
                whileInView={{ opacity: 1, y: 0 }}
                viewport={{ once: true }}
                transition={{ delay: cardIndex * 0.1 }}
              >
                <Card className="h-full group shadow-sm hover:shadow-lg transition-all duration-300 border border-slate-200/50 hover:border-amber-400 bg-white">
                  <CardHeader>
                    <div className="flex items-center gap-2 mb-3">
                      <div className="h-1 w-12 bg-gradient-to-r from-amber-500 to-amber-600 rounded-full" />
                    </div>
                    <CardTitle className="text-lg md:text-xl text-stone-900 group-hover:text-amber-600 transition-colors">{card.title}</CardTitle>
                  </CardHeader>
                  <CardContent className="space-y-5">
                    {card.sections.map((section, sectionIndex) => {
                      const sectionKey = `${cardIndex}-${sectionIndex}`;
                      const isExpanded = expandedSections[sectionKey];
                      const IconComponent = section.icon;

                      return (
                        <div key={sectionIndex} className="border-l-2 border-stone-200 pl-4">
                          <div className="flex items-start gap-3 mb-2">
                            <div className="mt-1">
                              <IconComponent className="h-4 w-4 text-amber-600" />
                            </div>
                            <div className="flex-1">
                              <Badge variant="secondary" className="mb-2 text-xs font-semibold bg-amber-100 text-amber-700 border-amber-200">
                                {section.label}
                              </Badge>
                              <p className="text-sm text-stone-700 font-medium leading-relaxed mb-2">
                                {section.summary}
                              </p>

                              {isExpanded && (
                                <motion.ul
                                  initial={{ opacity: 0, height: 0 }}
                                  animate={{ opacity: 1, height: "auto" }}
                                  exit={{ opacity: 0, height: 0 }}
                                  className="space-y-1.5 mt-3"
                                >
                                  {section.bullets.map((bullet, bulletIndex) => (
                                    <li key={bulletIndex} className="text-xs md:text-sm text-stone-600 flex items-start gap-2">
                                      <span className="text-amber-600 mt-0.5">•</span>
                                      <span>{bullet}</span>
                                    </li>
                                  ))}
                                </motion.ul>
                              )}

                              <button
                                onClick={() => toggleSection(cardIndex, sectionIndex)}
                                className="flex items-center gap-1 text-xs text-amber-600 hover:text-amber-700 font-medium mt-2 transition-colors"
                              >
                                {isExpanded ? (
                                  <>
                                    <ChevronUp className="h-3 w-3" />
                                    Show less
                                  </>
                                ) : (
                                  <>
                                    <ChevronDown className="h-3 w-3" />
                                    Show details
                                  </>
                                )}
                              </button>
                            </div>
                          </div>
                        </div>
                      );
                    })}
                  </CardContent>
                </Card>
              </motion.div>
            ))}
          </div>
        </div>
      </div>
    </section>
  );
}
